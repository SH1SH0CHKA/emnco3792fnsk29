<div id="themes-mmodal" class="modal-bg hidden">
  <div class="modal-window bg-primary-1100">
    <div class="flex items-center mb-2">
      <div class="flex grow">
        <div class="modal-caption modal-tabs active" data-tab="themes-tab">
          Темы
        </div>
        <div class="modal-caption modal-tabs" data-tab="personalization-tab">
          Внешний вид
        </div>
      </div>
      <button
        type="button"
        class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
        onclick="FrogUI.goHomeSection()"
      >
        <span class="material-symbols-rounded">close</span>
      </button>
    </div>

    <div class="modal-themes-tab" id="themes-tab">
      <div
        class="flex flex-col themes-items h-full overflow-y-auto"
        style="height: 75vh"
      >
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="indigo"
        >
          <div class="theme-demo indigo-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Indigo`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('indigo', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="blue"
        >
          <div class="theme-demo blue-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Blue`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('blue', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="turquoise"
        >
          <div class="theme-demo turquoise-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Turquoise`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('turquoise', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="red"
        >
          <div class="theme-demo red-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Red`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('red', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="yellow"
        >
          <div class="theme-demo yellow-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Yellow`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('yellow', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="gradient-blue"
        >
          <div class="theme-demo gradient-blue-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Blue Gradient`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('gradient-blue', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="gradient-fire"
        >
          <div class="theme-demo gradient-fire-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Fire Gradient`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('gradient-fire', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="gray"
        >
          <div class="theme-demo gray-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Gray`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('gray', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
        <div
          class="bg-primary-1000 px-3 flex items-center justify-center rounded-lg my-2 themes-item"
          data-theme="minecrafty"
        >
          <div class="theme-demo minecrafty-theme-color mr-4">
            <span class="text-white material-symbols-rounded"> brush </span>
          </div>
          <span class="text-white text-md grow">Тема `Minecrafty`</span>
          <button
            class="custom-button"
            onclick="FrogUI.applyTheme('minecrafty', true)"
          >
            Применить
          </button>
          <span class="material-symbols-rounded text-2xl hidden chk-icon">check</span>
        </div>
      </div>
    </div>

    <div class="modal-themes-tab hidden" id="personalization-tab">
      <p>Шрифт</p>
      <ul
        class="text-sm font-medium text-center rounded-lg shadow flex text-gray-400 mt-3 catselector"
        id="font-selector"
      >
        <li class="w-full">
          <div class="inline-block w-full p-4" data-font="mc">
            <span class="mc-text text-white" style="font-size: 24px">Aa</span>
            <span class="ml-3 text-white">Только Minecraft Rus</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4" data-font="default">
            <span class="ml-3 text-white">По умолчанию</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4" data-font="gt">
            <span
              class="text-white"
              style="font-size: 24px; font-family: 'Golos Text' !important"
              >Aa</span
            >
            <span class="ml-3 text-white">Только Golos Text</span>
          </div>
        </li>
      </ul>

      <p class="mt-3">Фон в лаунчере</p>
      <ul
        class="text-sm font-medium text-center rounded-lg shadow flex text-gray-400 mt-3 catselector"
        id="bg-selector"
      >
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">1</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">2</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">3</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">4</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">5</span>
          </div>
        </li>
        <li class="w-full">
          <div class="inline-block w-full p-4">
            <span class="text-white">6</span>
          </div>
        </li>
      </ul>

      <button
        class="custom-button mt-3 w-full"
        onclick="FrogBackendCommunicator.openBackgroundSelectDialog()"
      >
        Выбрать свой фон
      </button>
    </div>
  </div>
</div>

<style>
  .themes-items .material-symbols-rounded.chk-icon {
    color: #31c48d !important;
  }

  .themes-items .material-symbols-rounded.chk-icon.hidden {
    display: none !important;
  }

  .themes-item {
    height: 48px;
    min-height: 48px;
    max-height: 48px;
  }

  .themes-item .custom-button {
    padding: 6px !important;
  }

  .themes-item .theme-demo {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .themes-item .theme-demo * {
    color: white;
    margin-top: 2px;
    font-size: 16pt;
  }
</style>

<script>
  $("#themes-mmodal .modal-tabs").click(function () {
    if (!$(this).hasClass("active")) {
      $("#themes-mmodal .modal-tabs.active").removeClass("active");
      $(this).addClass("active");
      $("#themes-mmodal .modal-themes-tab:not(.hidden)").addClass("hidden");
      $("#" + $(this).data("tab")).removeClass("hidden");
    }
  });

  $("#themes-mmodal #font-selector li .inline-block").each((i, elem) => {
    if ($(elem).data("font") == mainConfig.selectedBaseFont) {
      $(elem).addClass("active");
      $("html").addClass("font-" + mainConfig.selectedBaseFont);
    }
  });

  $("#themes-mmodal #font-selector li .inline-block").click(function () {
    if (!$(this).hasClass("active")) {
      $("#themes-mmodal #font-selector li .inline-block.active").removeClass(
        "active"
      );
      $(this).addClass("active");
      $("html").removeClass("font-gt font-mc");
      $("html").addClass("font-" + $(this).data("font"));
      mainConfig.selectedBaseFont = $(this).data("font");
      FrogConfigManager.writeAndRefreshMainConfig(mainConfig);
    }
  });

  $("#themes-mmodal #bg-selector li .inline-block").each((i, elem) => {
    if ($(elem).find("span").text() == mainConfig.selectedBackground) {
      $(elem).addClass("active");
      $("html").addClass("bg-" + mainConfig.selectedBackground);
    }
  });

  $("#themes-mmodal #bg-selector li .inline-block").click(function () {
    if (!$(this).hasClass("active")) {
      $("#themes-mmodal #bg-selector li .inline-block.active").removeClass(
        "active"
      );
      $(this).addClass("active");
      $("html").removeClass("bg-1 bg-2 bg-3 bg-4 bg-5 bg-6");
      $("html").addClass("bg-" + $(this).find("span").text());
      mainConfig.selectedBackground = $(this).find("span").text();
      FrogConfigManager.writeAndRefreshMainConfig(mainConfig);
    }
  });

  // Handle background selection
  ipcRenderer.on("get-bg-result", (event, arg) => {
    if (arg != false) {
      var cext = path.extname(arg);
      fs.copyFileSync(
        arg,
        path.join(__dirname, "..", "cache", "custom-bg" + cext)
      );
      FrogUI.refreshCustomBg("custom-bg" + cext);
    }
  });
</script>
